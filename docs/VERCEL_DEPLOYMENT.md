# Vercel 部署說明

## 部署限制

### Serverless 環境限制
Vercel 使用 serverless functions，有以下限制：

1. **無持久化文件系統**：無法使用 `fs.writeFileSync()` 持久化數據
2. **冷啟動**：函數閒置後會被回收，內存數據會丟失
3. **只讀文件系統**：構建時的文件可以讀取，但運行時無法寫入

### 當前實現方式

**開發環境 (本地)**:
- 使用 `server/db.json` 文件存儲數據
- 支持讀寫操作，數據持久化

**生產環境 (Vercel)**:
- 使用內存存儲（`cachedNodes` 變數）
- ⚠️ **數據不會持久化**：重新部署或冷啟動後會重置為初始數據
- ⚠️ **多實例問題**：不同的 serverless instance 之間數據不同步

## 解決方案選項

### 方案 1：使用雲端數據庫（推薦用於生產）

#### Vercel Postgres / Supabase / MongoDB Atlas

適合生產環境的持久化方案，需要額外配置數據庫連接。

### 方案 2：僅作為演示應用（當前實現）

如果只是演示或面試作品集：
- ✅ 當前的內存存儲方案可接受
- ✅ 功能完整，可展示 CRUD 操作
- ⚠️ 需要在 README 中說明數據不持久化
- ⚠️ 重新整理頁面後移動操作會保留（同一 instance）
- ⚠️ 重新部署或冷啟動後會重置

## 本地與生產環境差異

| 功能 | 本地開發 | Vercel 生產 |
|------|---------|------------|
| 數據存儲 | `db.json` 文件 | 內存變數 |
| 數據持久化 | ✅ 是 | ❌ 否 |
| 重啟後保留 | ✅ 是 | ❌ 否 |
| 多用戶同步 | N/A | ❌ 否 |
